{"ast":null,"code":"import React from 'react';\nimport { signUp } from \"./API\";\nimport { ChangeActionLoading, ChangeActionLoggedIn } from \"../redux/actions\";\n\nconst onClickBtn = (event, fields, setFields, state, dispatch, history) => {\n  event.preventDefault();\n  SignUp(fields, setFields, state, dispatch, history).then();\n};\n\nconst SignUp = async (fields, setFields, state, dispatch, history) => {\n  const params = {\n    driver: { ...fields\n    }\n  };\n  await signUp(params).then(response => {\n    dispatch(ChangeActionLoggedIn({ ...state,\n      'isLoading': false,\n      'loggedIn': true,\n      'userType': 'Driver',\n      'userId': response.data.user.id\n    }));\n    history.push(`/Driver/${response.data.user.id}`);\n  }).catch(response => {\n    let errors = [];\n\n    if (response.status === 500) {\n      errors.push('This phone number registered');\n      dispatch(ChangeActionLoading({\n        'isLoading': false\n      }));\n      setFields({ ...fields,\n        alert: errors\n      });\n    } else {\n      if (!response.created) {\n        Object.entries(response.errors).map(error => {\n          errors.push(`${error[0]} ${error[1]}`);\n        });\n        setFields({ ...fields,\n          alert: errors\n        });\n      } else {\n        setFields({ ...fields,\n          alert: response.message\n        });\n      }\n    }\n  });\n};\n\n_c = SignUp;\nexport default onClickBtn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"sources":["D:/VinetiWorkSpace/final-project-GG/src/utils/SignupOnClick.js"],"names":["React","signUp","ChangeActionLoading","ChangeActionLoggedIn","onClickBtn","event","fields","setFields","state","dispatch","history","preventDefault","SignUp","then","params","driver","response","data","user","id","push","catch","errors","status","alert","created","Object","entries","map","error","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,MAAR,QAAqB,OAArB;AACA,SAAQC,mBAAR,EAA6BC,oBAA7B,QAAwD,kBAAxD;;AAEA,MAAMC,UAAU,GAAG,CAACC,KAAD,EAAQC,MAAR,EAAgBC,SAAhB,EAA2BC,KAA3B,EAAkCC,QAAlC,EAA4CC,OAA5C,KAAwD;AACzEL,EAAAA,KAAK,CAACM,cAAN;AACAC,EAAAA,MAAM,CAACN,MAAD,EAASC,SAAT,EAAoBC,KAApB,EAA2BC,QAA3B,EAAqCC,OAArC,CAAN,CACGG,IADH;AAED,CAJD;;AAMA,MAAMD,MAAM,GAAG,OAAON,MAAP,EAAeC,SAAf,EAA0BC,KAA1B,EAAiCC,QAAjC,EAA2CC,OAA3C,KAAuD;AACpE,QAAMI,MAAM,GAAG;AACbC,IAAAA,MAAM,EAAE,EACN,GAAGT;AADG;AADK,GAAf;AAKA,QAAML,MAAM,CAACa,MAAD,CAAN,CACHD,IADG,CACEG,QAAQ,IAAI;AAChBP,IAAAA,QAAQ,CAACN,oBAAoB,CAAC,EAC5B,GAAGK,KADyB;AAE5B,mBAAa,KAFe;AAG5B,kBAAY,IAHgB;AAI5B,kBAAY,QAJgB;AAK5B,gBAAUQ,QAAQ,CAACC,IAAT,CAAcC,IAAd,CAAmBC;AALD,KAAD,CAArB,CAAR;AAOAT,IAAAA,OAAO,CAACU,IAAR,CAAc,WAAUJ,QAAQ,CAACC,IAAT,CAAcC,IAAd,CAAmBC,EAAG,EAA9C;AACD,GAVG,EAWHE,KAXG,CAWGL,QAAQ,IAAI;AACjB,QAAIM,MAAM,GAAG,EAAb;;AACA,QAAIN,QAAQ,CAACO,MAAT,KAAoB,GAAxB,EAA6B;AAC3BD,MAAAA,MAAM,CAACF,IAAP,CAAY,8BAAZ;AACAX,MAAAA,QAAQ,CAACP,mBAAmB,CAAC;AAAC,qBAAa;AAAd,OAAD,CAApB,CAAR;AACAK,MAAAA,SAAS,CAAC,EAAE,GAAGD,MAAL;AAAakB,QAAAA,KAAK,EAAEF;AAApB,OAAD,CAAT;AACD,KAJD,MAKK;AACH,UAAI,CAACN,QAAQ,CAACS,OAAd,EAAuB;AACrBC,QAAAA,MAAM,CAACC,OAAP,CAAeX,QAAQ,CAACM,MAAxB,EAAgCM,GAAhC,CAAqCC,KAAD,IAAW;AAC7CP,UAAAA,MAAM,CAACF,IAAP,CAAa,GAAES,KAAK,CAAC,CAAD,CAAI,IAAGA,KAAK,CAAC,CAAD,CAAI,EAApC;AACD,SAFD;AAGAtB,QAAAA,SAAS,CAAC,EAAE,GAAGD,MAAL;AAAakB,UAAAA,KAAK,EAAEF;AAApB,SAAD,CAAT;AACD,OALD,MAMK;AACHf,QAAAA,SAAS,CAAC,EAAE,GAAGD,MAAL;AAAakB,UAAAA,KAAK,EAAER,QAAQ,CAACc;AAA7B,SAAD,CAAT;AACD;AACF;AACF,GA7BG,CAAN;AA8BD,CApCD;;KAAMlB,M;AAsCN,eAAeR,UAAf","sourcesContent":["import React from 'react'\r\nimport {signUp} from \"./API\";\r\nimport {ChangeActionLoading, ChangeActionLoggedIn} from \"../redux/actions\";\r\n\r\nconst onClickBtn = (event, fields, setFields, state, dispatch, history) => {\r\n  event.preventDefault()\r\n  SignUp(fields, setFields, state, dispatch, history)\r\n    .then()\r\n}\r\n\r\nconst SignUp = async (fields, setFields, state, dispatch, history) => {\r\n  const params = {\r\n    driver: {\r\n      ...fields\r\n    }\r\n  }\r\n  await signUp(params)\r\n    .then(response => {\r\n      dispatch(ChangeActionLoggedIn({\r\n        ...state,\r\n        'isLoading': false,\r\n        'loggedIn': true,\r\n        'userType': 'Driver',\r\n        'userId': response.data.user.id\r\n      }))\r\n      history.push(`/Driver/${response.data.user.id}`)\r\n    })\r\n    .catch(response => {\r\n      let errors = []\r\n      if (response.status === 500) {\r\n        errors.push('This phone number registered')\r\n        dispatch(ChangeActionLoading({'isLoading': false}))\r\n        setFields({ ...fields, alert: errors })\r\n      }\r\n      else {\r\n        if (!response.created) {\r\n          Object.entries(response.errors).map((error) => {\r\n            errors.push(`${error[0]} ${error[1]}`)\r\n          })\r\n          setFields({ ...fields, alert: errors })\r\n        }\r\n        else {\r\n          setFields({ ...fields, alert: response.message })\r\n        }\r\n      }\r\n    })\r\n}\r\n\r\nexport default onClickBtn"]},"metadata":{},"sourceType":"module"}